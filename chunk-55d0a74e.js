import{s as t}from"./chunk-fef0cdc6.js";import{a as s}from"./chunk-05f6b65c.js";import{u as e}from"./chunk-6f1ac0a9.js";import{l as n}from"./chunk-79c60fa1.js";import{a8 as a,r as i,o as r,aN as o,Y as c,Z as l,F as u,aV as m,b8 as p}from"./chunk-6addeafd.js";import"./chunk-ae148721.js";import"./chunk-e0a53dd1.js";import"./chunk-65a2ac68.js";import"./chunk-38e6902a.js";import"./chunk-5a8af153.js";import"./chunk-1974f2ff.js";import"./chunk-07814c5c.js";import"./chunk-c7a1205e.js";import"./chunk-3fae03ad.js";import"./chunk-4c5d5523.js";import"./chunk-66446df1.js";import"./chunk-6e0e2973.js";import"./chunk-54735b0f.js";import"./chunk-ca6057e9.js";import"./chunk-70d140bd.js";const k={class:"flex gap-3"},h={for:"explore"},b=["accept"],d=l("span",{class:"btn btn-primary btn-sm"},"上傳音樂",-1),j={class:"p-0"},f={class:"mr-12 overflow-hidden w-72 whitespace-nowrap text-ellipsis"},g={class:"flex gap-3"},v=["onClick"],y=["onClick"],C=a({__name:"MusicConfig",setup(a){const C=i(0),x=n.createInstance({name:"audioStore"}),w=e().globalConfig,{getMusicList:M}=t(w),S=i("audio/*"),I=i(M),L=()=>{w.resetMusicList(),x.clear()},D=()=>{w.clearMusicList(),x.clear()},N=async()=>{(await x.keys()).length>0&&x.iterate(((t,s)=>{w.addMusic({id:s+(new Date).getTime().toString(),name:s,url:"Storage"})}))},T=async t=>{if(!/audio*/.test(t.target.files[0].type))return void(C.value=3);let{dataUrl:e,fileName:n}=await s(t.target.files[0]);x.setItem((new Date).getTime().toString()+"+"+n,e).then((()=>{C.value=1,N()})).catch((()=>{C.value=2}))};return r((()=>{N()})),(t,s)=>(o(),c("div",null,[l("div",k,[l("button",{class:"btn btn-primary btn-sm",onClick:L},"重置音樂列表"),l("label",h,[l("input",{type:"file",class:"",id:"explore",style:{display:"none"},onChange:T,accept:S.value},null,40,b),d]),l("button",{class:"btn btn-error btn-sm",onClick:D},"刪除所有")]),l("div",null,[l("ul",j,[(o(!0),c(u,null,m(I.value,(t=>(o(),c("li",{key:t.id,class:"flex items-center gap-6 pb-2 mb-3 divide-y"},[l("div",f,[l("span",null,p(t.name),1)]),l("div",g,[l("button",{class:"btn btn-primary btn-xs",onClick:s=>(async t=>{w.setCurrentMusic(t,!1)})(t)},"播放",8,v),l("button",{class:"btn btn-error btn-xs",onClick:s=>(t=>{w.removeMusic(t.id),x.removeItem(t.name)})(t)},"刪除",8,y)])])))),128))])])]))}});export{C as default};
