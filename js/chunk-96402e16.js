var t,i;(i=i||{}).stringify=(t={"visit_linear-gradient":function(i){return t.visit_gradient(i)},"visit_repeating-linear-gradient":function(i){return t.visit_gradient(i)},"visit_radial-gradient":function(i){return t.visit_gradient(i)},"visit_repeating-radial-gradient":function(i){return t.visit_gradient(i)},visit_gradient:function(i){var r=t.visit(i.orientation);return r&&(r+=", "),i.type+"("+r+t.visit(i.colorStops)+")"},visit_shape:function(i){var r=i.value,n=t.visit(i.at),e=t.visit(i.style);return e&&(r+=" "+e),n&&(r+=" at "+n),r},"visit_default-radial":function(i){var r="",n=t.visit(i.at);return n&&(r+=n),r},"visit_extent-keyword":function(i){var r=i.value,n=t.visit(i.at);return n&&(r+=" at "+n),r},"visit_position-keyword":function(t){return t.value},visit_position:function(i){return t.visit(i.value.x)+" "+t.visit(i.value.y)},"visit_%":function(t){return t.value+"%"},visit_em:function(t){return t.value+"em"},visit_px:function(t){return t.value+"px"},visit_literal:function(i){return t.visit_color(i.value,i)},visit_hex:function(i){return t.visit_color("#"+i.value,i)},visit_rgb:function(i){return t.visit_color("rgb("+i.value.join(", ")+")",i)},visit_rgba:function(i){return t.visit_color("rgba("+i.value.join(", ")+")",i)},visit_color:function(i,r){var n=i,e=t.visit(r.length);return e&&(n+=" "+e),n},visit_angular:function(t){return t.value+"deg"},visit_directional:function(t){return"to "+t.value},visit_array:function(i){var r="",n=i.length;return i.forEach((function(i,e){r+=t.visit(i),e<n-1&&(r+=", ")})),r},visit:function(i){if(!i)return"";if(i instanceof Array)return t.visit_array(i,"");if(i.type){var r=t["visit_"+i.type];if(r)return r(i);throw Error("Missing visitor visit_"+i.type)}throw Error("Invalid node.")}},function(i){return t.visit(i)}),(i=i||{}).parse=function(){var t={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},i="";function r(t){var r=new Error(i+": "+t);throw r.source=i,r}function n(){var t=g(e);return i.length>0&&r("Invalid input not EOF"),t}function e(){return a("linear-gradient",t.linearGradient,u)||a("repeating-linear-gradient",t.repeatingLinearGradient,u)||a("radial-gradient",t.radialGradient,s)||a("repeating-radial-gradient",t.repeatingRadialGradient,s)}function a(i,n,e){return o(n,(function(n){var a=e();return a&&(h(t.comma)||r("Missing comma before color stops")),{type:i,orientation:a,colorStops:g(d)}}))}function o(i,n){var e=h(i);if(e){h(t.startCall)||r("Missing (");var a=n(e);return h(t.endCall)||r("Missing )"),a}}function u(){return y("directional",t.sideOrCorner,1)||y("angular",t.angleValue,1)}function s(){var r,n,e=l();return e&&((r=[]).push(e),n=i,h(t.comma)&&((e=l())?r.push(e):i=n)),r}function l(){var t=function(){var t=y("shape",/^(circle)/i,0);t&&(t.style=_()||v());return t}()||function(){var t=y("shape",/^(ellipse)/i,0);t&&(t.style=m()||v());return t}();if(t)t.at=c();else{var i=v();if(i){t=i;var r=c();r&&(t.at=r)}else{var n=f();n&&(t={type:"default-radial",at:n})}}return t}function v(){return y("extent-keyword",t.extentKeywords,1)}function c(){if(y("position",/^at/,0)){var t=f();return t||r("Missing positioning value"),t}}function f(){var t={x:m(),y:m()};if(t.x||t.y)return{type:"position",value:t}}function g(i){var n=i(),e=[];if(n)for(e.push(n);h(t.comma);)(n=i())?e.push(n):r("One extra comma");return e}function d(){var i=y("hex",t.hexColor,1)||o(t.rgbaColor,(function(){return{type:"rgba",value:g(p)}}))||o(t.rgbColor,(function(){return{type:"rgb",value:g(p)}}))||y("literal",t.literalColor,0);return i||r("Expected color definition"),i.length=m(),i}function p(){return h(t.number)[1]}function m(){return y("%",t.percentageValue,1)||y("position-keyword",t.positionKeywords,1)||_()}function _(){return y("px",t.pixelValue,1)||y("em",t.emValue,1)}function y(t,i,r){var n=h(i);if(n)return{type:t,value:n[r]}}function h(t){var r,n;return(n=/^[\n\r\t\s]+/.exec(i))&&b(n[0].length),(r=t.exec(i))&&b(r[0].length),r}function b(t){i=i.substr(t)}return function(t){return i=t.toString(),n()}}();var r=i.parse,n=i.stringify;export{r as p,n as s};
